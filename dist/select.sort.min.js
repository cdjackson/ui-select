/*!
 * ui-select
 * http://github.com/angular-ui/ui-select
 * Version: 0.12.1 - 2015-08-06T13:28:34.975Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.select.sort",["ui.select"]).directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,a){return{require:"^uiSelect",link:function(t,r,n,i){if(null===t[n.uiSelectSort])throw a("sort","Expected a list to sort");var o=angular.extend({axis:"horizontal"},t.$eval(n.uiSelectSortOptions)),s=o.axis,l="dragging",f="dropping",d="dropping-before",u="dropping-after";t.$watch(function(){return i.sortable},function(e){e?r.attr("draggable",!0):r.removeAttr("draggable")}),r.on("dragstart",function(e){r.addClass(l),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text/plain",t.$index)}),r.on("dragend",function(){r.removeClass(l)});var c,v=function(e,t){this.splice(t,0,this.splice(e,1)[0])},g=function(e){e.preventDefault();var t="vertical"===s?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===s?"offsetHeight":"offsetWidth"]/2?(r.removeClass(u),r.addClass(d)):(r.removeClass(d),r.addClass(u))},p=function(t){t.preventDefault();var a=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text/plain"),10);e.cancel(c),c=e(function(){C(a)},20)},C=function(e){var a=t.$eval(n.uiSelectSort),i=a[e],o=null;o=r.hasClass(d)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,v.apply(a,[e,o]),t.$apply(function(){t.$emit("uiSelectSort:change",{array:a,item:i,from:e,to:o})}),r.removeClass(f),r.removeClass(d),r.removeClass(u),r.off("drop",p)};r.on("dragenter",function(){r.hasClass(l)||(r.addClass(f),r.on("dragover",g),r.on("drop",p))}),r.on("dragleave",function(e){e.target==r&&(r.removeClass(f),r.removeClass(d),r.removeClass(u),r.off("dragover",g),r.off("drop",p))})}}}])}();